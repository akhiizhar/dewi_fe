<ion-content>
  <div class="dashboard-container">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div>
          <p>Request Form</p>
        </div>
      </div>
    </div>

    <form [formGroup]="orderForm" (ngSubmit)="submitForm()">
      <!-- Form Details -->
      <div class="card">
        <h2>Form Details</h2>

        <div class="form-group">
          <label>Title</label>
          <input type="text" formControlName="title" />
        </div>

        <div class="form-group">
          <label>Description</label>
          <textarea formControlName="description" rows="3"></textarea>
        </div>

        <div class="form-group" (click)="showDatePicker = true">
          <label>Due Date</label>
          <input
            type="text"
            readonly
            [value]="orderForm.get('due_date')?.value | date: 'yyyy-MM-dd'"
          />
        </div>

        <ion-datetime
          *ngIf="showDatePicker"
          formControlName="due_date"
          presentation="date"
          (ionChange)="updateDueDate($event)"
          class="smooth-picker"
        ></ion-datetime>
      </div>

      <!-- Items -->
      <div class="card">
        <h2>Items</h2>

        <div formArrayName="items">
          <div
            *ngFor="let item of items.controls; let i = index"
            [formGroupName]="i"
            class="item-group"
          >
            <h3>Item {{ i + 1 }}</h3>

            <div class="form-group">
              <label>Item Name</label>
              <input type="text" formControlName="item_name" />
            </div>

            <div class="form-group">
              <label>Specification</label>
              <input type="text" formControlName="specification" />
            </div>

            <div class="form-group">
              <label>Quantity</label>
              <input type="number" formControlName="quantity" />
            </div>

            <div class="form-group">
              <label>Unit</label>
              <input type="text" formControlName="unit" />
            </div>

            <div class="form-group">
              <label>Unit Price</label>
              <input type="number" formControlName="unit_price" />
            </div>

            <button type="button" (click)="removeItem(i)" class="danger-button">
              Remove Item
            </button>
          </div>
        </div>

        <button type="button" (click)="addItem()" class="add-button">
          Add Item
        </button>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="orderForm.invalid"
        class="submit-button"
      >
        Submit
      </button>
    </form>
  </div>
</ion-content>
